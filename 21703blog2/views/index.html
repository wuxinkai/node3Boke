<%include ./include/header.html%>
<div class="row">
    <div class="col-md-10 col-md-offset-1">
        <%articles.forEach(function(article){%>
        <div class="media">
            <div class="media-left">
                <a href="">
                    <img class="media-object avatar" src="<%=article.author&&article.author.avatar%>" alt="">
                </a>
            </div>
            <div class="media-body">
                <h4 class="media-heading">
                    <a href="/article/detail/<%=article._id%>">
                        <%=article.title%>
                    </a>
                </h4>
                <p><%-article.content%></p>
                <img style="height: 100px;width: 100px;" src="<%=article.img%>" alt="">
                <p>作者:<%=article.author&&article.author.username%>    |发表时间:<%=article.createAt.toLocaleString()%>|pv:<%=article.pv%></p>
            </div>
        </div>
        <%})%>
    </div>
</div>
<div class="row">
    <nav aria-label="Page navigation">
        <ul class="pagination">
            <%if(pageNum>1){%>
            <li>
                <a href="/?keyword=<%=keyword%>&pageNum=<%=pageNum-1%>&pageSize=<%=pageSize%>"
                   aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <%}%>
            <%
            var total = totalPage>10?10:totalPage;
            if(pageNum<=6){
            for(let i=1;i<=total;i++){%>
            <li class="<%=i==pageNum?'active':''%>"><a
                    href="/?keyword=<%=keyword%>&pageNum=<%=i%>&pageSize=<%=pageSize%>"><%=i%></a></li>
            <%}
            }else{
            var total = totalPage>pageNum+4?pageNum+4:totalPage;
            for(let i=pageNum-5;i<=total;i++){%>
            <li class="<%=i==pageNum?'active':''%>"><a
                    href="/?keyword=<%=keyword%>&pageNum=<%=i%>&pageSize=<%=pageSize%>"><%=i%></a></li>
            <%}
            }
            %>
            <%if(pageNum
            <totalPage
                    ){%>
                <li>
                    <a href="/?keyword=<%=keyword%>&pageNum=<%=pageNum+1%>&pageSize=<%=pageSize%>" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                <%}
                %>
        </ul>
    </nav>
</div>
<%include ./include/footer.html%>